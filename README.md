## Дипломный проект SB1. "Доска объявлений (бэкенд часть)"

## Цель проекта
- Разработать backend-часть для сайта объявлений.
- Приложение должно включать функциональность для создания, просмотра, редактирования и удаления объявлений, комментариев, а также регистрацию и авторизацию пользователей.

## Инструкция по установке

1. Клонируйте репозиторий:
```python
https://github.com/DoniyoRich/AdsBoard.git
```

2. Установите зависимости:
```
pip install -r requirements.txt
```
Также необходимо создать базу данных PostgreSQL на хосте, создать пользователя с паролем, а также предоставить пользовтелю
права на управление созданной базой данных.
Создайте файл .env в корне проекта на основе предоставленного файла .env.sample и пропишите в нем все необходимые переменные окружения
для подключения к базе данных.

## Описание

Разработанное приложение представляет собой реализованную бэкенд часть для сайта по работе с объявлениями
на основе Django Rest Framework (DRF).

Проект предлагает следующий функционал:

- Авторизация и аутентификация пользователей.
- Распределение ролей между пользователями (пользователь и админ).
- Восстановление пароля через электронную почту.
- CRUD для объявлений на сайте (админ может удалять или редактировать все объявления, а пользователи только свои).
- Под каждым объявлением пользователи могут оставлять отзывы (комментарии).
- В заголовке сайта можно осуществлять поиск объявлений по названию.

### Модели

#### Модель «Пользователь»:
Модель пользователя содержит следующие поля:

- first_name — имя пользователя (строка).
- last_name — фамилия пользователя (строка).
- phone — телефон для связи (строка).
- email — электронная почта пользователя (email) **(используется в качестве логина).**
- role — роль пользователя, доступные значения: user, admin.
- image — аватарка пользователя.


#### Модель «Объявление»:
Модель объявления содержит следующие поля: 

- title — название товара.
- price — цена товара (целое число).
- description — описание товара.
- author — пользователь, который создал объявление.
- created_at — время и дата создания объявления.
- updated_at — время и дата изменения объявления.
Объявления сортируются по умолчанию по дате создания (чем новее, тем выше).

#### Модель «Отзыв»:
Модель отзыва (комментария) содержит следующие поля: 

- text — текст отзыва.
- author — пользователь, который оставил отзыв.
- ad — объявление, под которым оставлен отзыв.
- created_at — время и дата создания отзыва
- updated_at — время и дата изменения объявления.


### Регистрация и аутентификация пользователей
- Реализована система регистрации и аутентификации пользователей.
- Пользователи имеют возможность зарегистрироваться на сайте, подтвердив свой email.
Предусмотрена возможность сброса и восстановления пароля через почту. Для этого:

    - Пользователь отправляет POST-запрос на адрес /users/reset_password/ с содержанием:

  ```javascript
  {
      "email": "example@mail.com"
  }
  
  ```
  - Сервер высылает на почту ссылку вида:

    ```javascript
    "/<url>/{uid}/{token}"
  
    ```
  - Пользователь отправляет POST-запрос на адрес /users/reset_password_confirm с содержанием:

    ```javascript
    {
        "uid": "uid",
        "token": "token",
        "new_password": "P4$$W0RD"
    }
    ```

### Представления и эндпоинты

- Реализованы эндпоинты для всех необходимых операций с использованием DRF.
- Реализован поиск товаров по названию (поле "title") с использованием библиотеки `django-filter`.
- Эндпоинт `/ads/` поддерживает пагинацию с ограничением не более 4 объектов на странице.



### Ограничение доступа

- Анонимный пользователь может: 
  - получать список объявлений, комментариев
- Пользователь может: 
  - получать список объявлений,
  - получать одно объявление,
  - создавать объявление,
  - редактировать и удалять свое объявление,
  - получать список комментариев,
  - создавать комментарии,
  - редактировать/удалять свои комментарии.
- Администратор может: 
  - дополнительно к правам пользователя редактировать или удалять объявления и комментарии любых других пользователей.



### Упаковка в Docker

- Создан `Dockerfile` для сборки образа приложения.
- Создан `docker-compose.yml` для запуска приложения и базы данных PostgreSQL.

### Тестирование

- Написаны тесты для всех основных функций платформы.
- Тесты написаны с использованием библиотеки `pytest`.
- Покрытие тестами составляет ***87%***. Отчет представлен в папке ***htmlcov***.

## Лицензия

[Doniyor Ishanov. ](#) - [SkyPro IT School](#)